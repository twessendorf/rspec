<div class="paragraph">
<p>When you want to define a function that can accept a function pointer as an argument, there are three ways in C&#43;&#43; to declare the parameter type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A function pointer: <code>void f(void (*callback)());</code></p>
</li>
<li>
<p>A <code>std::function</code>: <code>void f(std::function&lt;void()&gt; callback);</code></p>
</li>
<li>
<p>A template argument: <code>template&lt;class Callback&gt; void f(Callback callback);</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using a function pointer is an inferior solution, for the following reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only a function pointer can be passed as an argument, while the other options offer the caller more flexibility because they can take more advanced functors, such as lambdas with some captured state</p>
</li>
<li>
<p>The syntax is obscure</p>
</li>
<li>
<p>It typically has worse performance than the template parameter solution.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See S5213 for a discussion of how to choose between <code>std::function</code> and a template parameter.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>using Criterion = bool (*)(DataPoint const&amp;);
void filter(DataSet* data, Criterion criterion); // Noncompliant

using Callback = void (*)(EventInfo const&amp;);
class Button {
public:
    void addOnClick(Callback c) {myOnClickHandler = c;} // Noncompliant
private:
    Callback myOnClickHandler;
};</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>template&lt;class Criterion&gt;
void filter(DataSet* data, Criterion criterion); // Compliant, uses the more efficient template argument

using Callback = std::function&lt;void(EventInfo const&amp;)&gt;;
class Button {
public:
    void addOnClick(Callback c) {myOnClickHandler = c;} // Compliant, uses the more flexible std::function
private:
    Callback myOnClickHandler;
};</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/isocpp/CppCoreGuidelines/blob/036324/CppCoreGuidelines.md#t40-use-function-objects-to-pass-operations-to-algorithms">C&#43;&#43; Core Guidelines T.40</a> - Use function objects to pass operations to algorithms</p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Replace this function pointer with a template parameter or a "std::function"</p>
</div>
</div>
</div>
</div>