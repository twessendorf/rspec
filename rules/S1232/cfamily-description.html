<div class="paragraph">
<p>The same form that was used to create an object should always be used to delete it. Specifically, arrays should be deleted with <code>delete []</code> and objects should be deleted with <code>delete</code>. To do otherwise will cause segfaults (in the case of deleting an object with <code>delete []</code>) and memory leaks (in the case of deleting an array with <code>delete</code>).</p>
</div>
<div class="paragraph">
<p>This is also true when memory was allocated with <code>malloc</code>, or one of its variants, then it must be released using <code>free()</code> not <code>delete</code>. Similarly memory allocated by <code>new</code> can not be released using <code>free</code> instead of <code>delete</code>.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>string* _pString1 = new string;
string* _pString2 = new string[100];
char* _pChar = (char *) malloc(100);

delete [] _pString1; // Noncompliant; an object was declared but array deletion is attempted
delete _pString2;  // Noncompliant; an array was declared but an object (the first in the array) is deleted
delete _pChar; // Noncompliant</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>string* _pString1 = new string;
string* _pString2 = new string[100];
char* _pChar = (char *) malloc(100);

delete _pString1;
delete [] _pString2;
free(_pChar);</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.sei.cmu.edu/confluence/x/Gns-BQ">CERT, MEM51-CPP.</a> - Properly deallocate dynamically allocated resources</p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Use "[delete|delete []]|free()" here instead.</p>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_duplicated_by_s3530">is duplicated by: S3530</h3>

</div>
</div>
</div>