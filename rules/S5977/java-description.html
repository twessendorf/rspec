<div class="paragraph">
<p>Tests should always:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Make sure that production code behaves as expected, including edge cases.</p>
</li>
<li>
<p>Be easy to debug, i.e. understandable and reproducible.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using random values in tests will not necessarily check edge cases, and it will make test logs a lot harder to read. It is better to use easily readable hardcoded values. If this makes your code bigger you can use helper functions.</p>
</div>
<div class="paragraph">
<p>There is one valid use case for random data in tests: when testing every value would make tests impractically slow. In this case the best you can do is use random to test every value on the long run. You should however make sure that random values are logged so that you can reproduce failures. Some libraries exist to make all this easier. You can for example use property-based testing libraries such as <a href="https://github.com/jlink/jqwik">jqwik</a>.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when <code>new Random()</code> or <code>UUID.randomUUID()</code> are called in test code.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>int userAge = new Random().nextInt(42);  // Noncompliant
UUID userID = UUID.randomUUID(); // Noncompliant</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>int userAge = 31;
UUID userID = UUID.fromString("00000000-000-0000-0000-000000000001");</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://phauer.com/2019/modern-best-practices-testing-java/#use-fixed-data-instead-of-randomized-data">Modern Best Practices for Testing in Java - Philipp Hauer</a></p>
</li>
<li>
<p><a href="https://jqwik.net/">Jqwik test engine</a></p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Replace randomly generated values with fixed ones.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>Primary locations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first call to <code>new Random()</code> in a file.</p>
</li>
<li>
<p>The first call to <code>UUID.randomUUID()</code> in a file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Secondary locations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The following calls to <code>new Random()</code> or <code>UUID.randomUUID()</code> in the file.</p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_4_sep_2020_114633_nicolas_harraudeau_wrote">on 4 Sep 2020, 11:46:33 Nicolas Harraudeau wrote:</h3>
<div class="paragraph">
<p>Note that <a href="https://phauer.com/2019/modern-best-practices-testing-java/#use-parameterized-tests">Modern Best Practices for Testing in Java - Philipp Hauer</a> also mentions <code>Instant.now()</code> as a source or randomness, however there can be valid use cases for using the current time, such as timing some operation. Forbidding <code>Instant.now()</code> would raise False Positives.</p>
</div>
</div>
</div>
</div>