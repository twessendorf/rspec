<div class="paragraph">
<p><code>java.util.concurrent.ScheduledThreadPoolExecutor&#8217;s pool is sized with `corePoolSize</code>, so setting <code>corePoolSize</code> to zero means the executor will have no threads and run nothing.</p>
</div>
<div class="paragraph">
<p>This rule detects instances where <code>corePoolSize</code> is set to zero, via either its setter or the object constructor.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>public void do(){

  ScheduledThreadPoolExecutor stpe1 = new ScheduledThreadPoolExecutor(0); // Noncompliant

  ScheduledThreadPoolExecutor stpe2 = new ScheduledThreadPoolExecutor(POOL_SIZE);
  stpe2.setCorePoolSize(0);  // Noncompliant

  ...</pre>
</div>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Increase the "corePoolSize".</p>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_8_oct_2014_191256_ann_campbell_wrote">on 8 Oct 2014, 19:12:56 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~nicolas.peru] after writing this rule up, I noticed that its analog is commented-out:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>/**</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Since you can change the number of core threads for a scheduled</p>
</li>
<li>
<p>thread pool executor, disabling this for now
*</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So&#8230;&#8203; what do you think of a smarter implementation (I&#8217;d have to update the description) that detects when it&#8217;s set to zero &amp; left that way?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_21_oct_2014_154715_nicolas_peru_wrote">on 21 Oct 2014, 15:47:15 Nicolas Peru wrote:</h3>
<div class="paragraph">
<p>This is way harder. The "left that way" part can concern a lot of code not under analysis scope.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_21_oct_2014_200132_ann_campbell_wrote">on 21 Oct 2014, 20:01:32 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Do you feel the rule has value as-is or should we scrap it as was done in FB?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_4_feb_2015_085904_nicolas_peru_wrote">on 4 Feb 2015, 08:59:04 Nicolas Peru wrote:</h3>
<div class="paragraph">
<p>Let&#8217;s reimplement it as what was done in FB. Scheduled for 3.0.</p>
</div>
</div>
</div>
</div>