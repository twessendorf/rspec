<div class="paragraph">
<p>Shifting an integral number by 0 is equivalent to doing nothing but makes the code confusing for maintainers.</p>
</div>
<div class="paragraph">
<p>If the first operand is an <code>int</code> or <code>uint</code> (32-bit quantity), the shift count is given by the low-order five bits of the second operand. That is, the actual shift count is 0 to 31 bits.</p>
</div>
<div class="paragraph">
<p>Note that integral number with a less than 32-bit quantity (e.g. <code>short</code>, <code>ushort</code>&#8230;&#8203;) are implicitly converted to <code>int</code> before the shifting operation and so the rule for <code>int</code>/<code>uint</code> applies.</p>
</div>
<div class="paragraph">
<p>If the first operand is a <code>long</code> or <code>ulong</code> (64-bit quantity), the shift count is given by the low-order six bits of the second operand. That is, the actual shift count is 0 to 63 bits.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>public void Main()
{
    short s = 1;
    short shortShift1 = (short)(s &lt;&lt; 0); // Noncompliant
    short shortShift1 = (short)(s &lt;&lt; 16); // Compliant as short will be cast to int (16 is between 0 and 31)
    short shortShift3 = (short)(s &lt;&lt; 32); // Noncompliant, this is equivalent to shifting by 1

    int i = 1;
    int intShift1 = i &lt;&lt; 0; // Noncompliant
    int intShift2 = i &lt;&lt; 32; // Noncompliant, this is equivalent to shifting by 1

    long lg = 1;
    long longShift1 = lg &lt;&lt; 0; // Noncompliant
    long longShift2 = lg &lt;&lt; 64; // Noncompliant, this is equivalent to shifting by 1
}</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>public void Main()
{
    short s = 1;
    short shortShift1 = s;
    short shortShift1 = (short)(s &lt;&lt; 16);
    short shortShift3 = (short)(s &lt;&lt; 1);

    int i = 1;
    var intShift1 = i;
    var intShift2 = i &lt;&lt; 1;

    long lg = 1;
    var longShift1 = lg;
    var longShift2 = lg &lt;&lt; 1;
}</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exceptions">Exceptions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This rule doesn&#8217;t raise an issue when the shift by zero is obviously for cosmetic reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When the value shifted is a literal.</p>
</li>
<li>
<p>When there is a similar shift at the same position on line before or after. E.g.:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>bytes[loc+0] = (byte)(value &gt;&gt; 8);
bytes[loc+1] = (byte)(value &gt;&gt; 0);</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/bitwise-and-shift-operators#left-shift-operator-">Microsoft documentation - Bitwise and shift operators</a></p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Either make "xxx" a "long" or correct this shift to (shiftBy%32).</p>
</div>
<div class="paragraph">
<p>Correct this shift to (shiftBy%64).</p>
</div>
<div class="paragraph">
<p>Remove this useless shift (multiple of 32/64).</p>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s875">relates to: S875</h3>

</div>
<div class="sect2">
<h3 id="_on_30_oct_2014_103308_evgeny_mandrikov_wrote">on 30 Oct 2014, 10:33:08 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] what about shifting long by 64? shouldn&#8217;t it be a part of this rule?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_30_oct_2014_113810_ann_campbell_wrote">on 30 Oct 2014, 11:38:10 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Good point [~evgeny.mandrikov]. Thanks.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_30_oct_2014_121259_evgeny_mandrikov_wrote">on 30 Oct 2014, 12:12:59 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] maybe better to use term "bits" instead of "size"&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_30_oct_2014_123212_evgeny_mandrikov_wrote">on 30 Oct 2014, 12:32:12 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] thanks!</p>
</div>
</div>
</div>
</div>