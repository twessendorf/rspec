<div class="paragraph">
<p>A <code>static</code> field that is neither constant nor read-only is not thread-safe. Correctly accessing these fields from different threads needs synchronization with <code>lock</code>s. Improper synchronization may lead to unexpected results, thus publicly visible static fields are best suited for storing non-changing data shared by many consumers. To enforce this intent, these fields should be marked <code>readonly</code> or converted to constants.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>public class Math
{
  public static double Pi = 3.14;  // Noncompliant
}</pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public class Shape
{
  public static Shape Empty = new EmptyShape();  // Noncompliant

  private class EmptyShape : Shape
  {
  }
}</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>public class Math
{
  public const double Pi = 3.14;
}</pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>public class Shape
{
  public static readonly Shape Empty = new EmptyShape();

  private class EmptyShape : Shape
  {
  }
}</pre>
</div>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Change the visibility of "xxx" or make it "const" or "readonly".</p>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s2226">relates to: S2226</h3>

</div>
<div class="sect2">
<h3 id="_on_21_nov_2014_144945_freddy_mallet_wrote">on 21 Nov 2014, 14:49:45 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] we should forget the technical difficulty to implement rules. If we really do that, this rule should become"A static field should never be updated from a thread". Because if the rule is really ""public static" fields should be "readonly"" we&#8217;re going to generate a big amount of false positives</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_21_nov_2014_145126_freddy_mallet_wrote">on 21 Nov 2014, 14:51:26 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>And as soon as we&#8217;re talking about multi-threading issue, the "multi-threading" tag should be used.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_28_may_2015_120052_tamas_vajk_wrote">on 28 May 2015, 12:00:52 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I rewrote this rule to match the description here: https://msdn.microsoft.com/en-us/library/ms182353.aspx</p>
</div>
<div class="paragraph">
<p>The main idea is the same, <code>public static</code> fields should be either <code>const</code> or <code>readonly</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_28_may_2015_142944_tamas_vajk_wrote">on 28 May 2015, 14:29:44 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2], could you go through the description?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_28_may_2015_154738_ann_campbell_wrote">on 28 May 2015, 15:47:38 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>the description looks fine [~tamas.vajk]. Could you revert the code samples too, please?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_29_may_2015_071530_tamas_vajk_wrote">on 29 May 2015, 07:15:30 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2], the code samples were written by me, there is no need to revert them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_29_may_2015_145132_ann_campbell_wrote">on 29 May 2015, 14:51:32 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Cool. Thanks [~tamas.vajk]</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_1_jun_2015_150242_tamas_vajk_wrote">on 1 Jun 2015, 15:02:42 Tamas Vajk wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I&#8217;ve changed the severity to major, it shouldn&#8217;t be critical IMO</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_1_jun_2015_171022_ann_campbell_wrote">on 1 Jun 2015, 17:10:22 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>that&#8217;s fine [~tamas.vajk]</p>
</div>
</div>
</div>
</div>