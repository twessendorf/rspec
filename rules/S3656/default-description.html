<div class="paragraph">
<p>Protected member variables are similar to global variables; any derived class can modify them. When protected member variables are used, invariants cannot be enforced. Also, protected member variables are hard to maintain since they can be manipulated through multiple classes in different files.</p>
</div>
<div class="paragraph">
<p>If a class is just a data store without logic, it can safely contain only <code>public</code> member variables and no member functions. Otherwise, data members are tightly coupled to the class' logic, and encapsulation must be used. In this case, having only private member variables enforces invariants for data and ensures that logic is defined only in the member functions of the class. Structuring it this way makes It easier to guarantee integrity and easier for maintainers to understand the code.</p>
</div>
<div class="paragraph">
<p>But when an object provides encapsulation by using <code>protected</code> member variables, data integrity logic can be spread through the class and all its derived class, becoming a source of complexity and that will be error-prone for maintainers and extenders.</p>
</div>
<div class="paragraph">
<p>That&#8217;s why <code>protected</code> member variables should be changed to <code>private</code> and manipulated exclusively through <code>public</code> or <code>protected</code> member functions of the base class.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when a <code>class</code> or <code>struct</code> contains <code>protected</code> member variables.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>class Stat {
public:
  long int getCount() {
    return count;
  }
protected:
  long int count = 0; // Noncompliant; expose a protected member variable.
                      // By just looking at "Stat" class, it's not possible to be sure that "count"
                      // is modified properly, we also need to check all derived classes
};

class EventStat : public Stat {
public:
  void onEvent() {
    if (count &lt; LONG_MAX) {
      count++;
    }
  }
};</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>class Stat {
public:
  long int getCount() {
    return count;
  }
protected:
  void increment() { // Compliant; expose a protected member function
    if (count &lt; LONG_MAX) {
      count++;
    }
  }
private:
  long int count = 0; // member variable is private
};

class EventStat : public Stat {
public:
  void onEvent() {
    increment();
  }
};</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exceptions">Exceptions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Const member variables and reference member variables are ignored since they don&#8217;t break invariants.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>MISRA C&#43;&#43;:2008, 11-0-1 - Member data in non-POD class types shall be private.</p>
</li>
<li>
<p><a href="https://github.com/isocpp/CppCoreGuidelines/blob/036324/CppCoreGuidelines.md#c133-avoid-protected-data">C&#43;&#43; Core Guidelines C.133</a> - Avoid protected data</p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Make this member variable "private".</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>variable name</p>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_duplicated_by_s1018">is duplicated by: S1018</h3>

</div>
<div class="sect2">
<h3 id="_on_23_jun_2016_115837_ann_campbell_wrote">on 23 Jun 2016, 11:58:37 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Objective-C, [~alban.auzeill]?</p>
</div>
</div>
</div>
</div>