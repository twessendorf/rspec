<div class="paragraph">
<p>When a constant is used as a condition, either it has no effect on the execution flow and it can be removed, or some code will never be executed and it is a bug.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when a constant expression is used as a condition in an <code>if</code>, <code>elif</code>, a conditional expression or other boolean expressions.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>def func(param = None):
    param = (1,)
    if param:  # Noncompliant. var is always set to (1,), the first branch of the if will always execute.
        return sum(param)
    else:
        return None

var2 = 1 if func else 2  # Noncompliant. "func" will always be equivalent to True.
var3 = func and 1 else 2  # Noncompliant.</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>def func(param = None):
    if param is None:
        param = (1,)
    if param:
        return sum(param)
    else:
        return None

var2 = 1 if func() else 2
var3 = func() and 1 else 2</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.python.org/dev/peps/pep-0285/">PEP 285 - Adding a bool type</a></p>
</li>
<li>
<p><a href="https://docs.python.org/3/library/stdtypes.html#truth-value-testing">Python documentation - Truth Value Testing</a></p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>If the constant is a function/method/lambda:</p>
<div class="ulist">
<ul>
<li>
<p>Call this function/method/lambda; as a condition it is always True.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If the constant is a class:</p>
<div class="ulist">
<ul>
<li>
<p>Call this class; as a condition it is always True.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Otherwise:</p>
<div class="ulist">
<ul>
<li>
<p>Either remove this constant expression or make it return different values.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="ulist">
<ul>
<li>
<p>Primary: the constant expression</p>
</li>
<li>
<p>Secondary: if the expression is a variable which has been assigned to only one possible value</p>
<div class="ulist">
<ul>
<li>
<p>location: the last assignment</p>
</li>
<li>
<p>message: "Last assignment"</p>
</li>
</ul>
</div>
</li>
<li>
<p>Secondary: if the expression is a module</p>
<div class="ulist">
<ul>
<li>
<p>location: the module import</p>
</li>
<li>
<p>message: "Module imported here"</p>
</li>
</ul>
</div>
</li>
<li>
<p>Secondary: if the expression is a function/method</p>
<div class="ulist">
<ul>
<li>
<p>location: the function/method signature</p>
</li>
<li>
<p>message: "Function/Method definition"</p>
</li>
</ul>
</div>
</li>
<li>
<p>Secondary: if the expression is a class</p>
<div class="ulist">
<ul>
<li>
<p>location: the class name</p>
</li>
<li>
<p>message: "Class definition"</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_related_to_s5914">is related to: S5914</h3>

</div>
<div class="sect2">
<h3 id="_on_1_may_2020_174644_nicolas_harraudeau_wrote">on 1 May 2020, 17:46:44 Nicolas Harraudeau wrote:</h3>
<div class="paragraph">
<p>This rule should later be superseded by RSPEC-2589 and RSPEC-2583. We don&#8217;t do any symbolic execution yet for python.</p>
</div>
</div>
</div>
</div>