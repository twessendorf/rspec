<div class="paragraph">
<p>Just as you can&#8217;t cut something into three halves, you can&#8217;t grab a <code>substring</code> that starts or ends outside the original <code>String</code>'s bounds, you can&#8217;t use <code>substring</code> to get a reversed portion of a <code>String</code>, and you can&#8217;t get the <code>charAt</code> a value that&#8217;s before the <code>String</code> starts or after it ends.</p>
</div>
<div class="paragraph">
<p>This rule detects when negative literal or <code>String::length</code> is passed as an argument to the <code>String::substring</code>, <code>String::charAt</code> and related methods.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>String speech = "Now is the time for all good people to come to the aid of their country.";

String substr1 = speech.substring(-1, speech.length());  // Noncompliant; start and end values both bad
String substr2 = speech.substring(speech.length(), 0); // Noncompliant, start value must be &lt; end value
char ch = speech.charAt(speech.length());  // Noncompliant</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>String speech = "Now is the time for all good people to come to the aid of their country.";

String substr1 = speech; // Closest correct values to original code yield whole string
String substr2 = new StringBuilder(speech).reverse().toString()
char ch = speech.charAt(speech.length()-1);</pre>
</div>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Refactor this "[substring|charAt]" call; it will result in an "StringIndexOutOfBounds" exception at runtime.</p>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s2121">relates to: S2121</h3>

</div>
</div>
</div>