<div class="paragraph">
<p>Rvalue reference arguments allow to transfer ownership of objects.</p>
</div>
<div class="paragraph">
<p>When a function has an argument of type rvalue reference, it is expected to call <code>std::move</code> to take ownership of the corresponding parameter when it is called.</p>
</div>
<div class="paragraph">
<p>If it does not do it or if it does it conditionally, ownership is unclear and this might lead to bugs.</p>
</div>
<div class="paragraph">
<p>This rule does not apply when the argument is a forwarding reference.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>enum class Shape {
  empty, circle, square
};

class DrawingStore {
  std::vector&lt;Shape&gt; store;
public:
  void insertShape(Shape &amp;&amp;shape) {
    store.emplace_back(shape); // Noncompliant, call to std::move is expected
  }

  void insertIfCircle(Shape &amp;&amp;shape) {
      if (shape == Shape::circle) {
          store.emplace_back(std::move(shape)); // Noncompliant, std::move is not always called, ownership of shape is not clear
      }
  }
};</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>enum class Shape {
  empty, circle, square
};

class DrawingStoreOk {
  std::vector&lt;Shape&gt; store;
public:
  void insertShape(Shape &amp;&amp;shape) {
    store.emplace_back(std::move(shape));
  }

  void insertIfCircle(const Shape &amp;shape) {
      if (shape == Shape::circle) {
          store.emplace_back(shape);
      }
  }
};</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/isocpp/CppCoreGuidelines/blob/036324/CppCoreGuidelines.md#f18-for-will-move-from-parameters-pass-by-x-and-stdmove-the-parameter">C&#43;&#43; Core Guidelines F.18</a> - For “will-move-from” parameters, pass by X&amp;&amp; and std::move the parameter</p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>"std::move" is never called on this rvalue reference argument.</p>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s5272">relates to: S5272</h3>

</div>
</div>
</div>