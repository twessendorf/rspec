<div class="paragraph">
<p>When handling a caught exception, the original exception&#8217;s message and stack trace should be logged or passed forward.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>  try.
    if ABS( NUMBER ) &gt; 100.
      write / 'Number is large'.
    endif.
    catch CX_SY_ARITHMETIC_ERROR into OREF.
  endtry.</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>  try.
    if ABS( NUMBER ) &gt; 100.
      write / 'Number is large'.
    endif.
  catch CX_SY_ARITHMETIC_ERROR into OREF.
    write / OREF-&gt;GET_TEXT( ).
  endtry.</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exceptions">Exceptions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a block contains a comment, it is not considered to be empty.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://owasp.org/Top10/A09_2021-Security_Logging_and_Monitoring_Failures/">OWASP Top 10 2021 Category A9</a> - Security Logging and Monitoring Failures</p>
</li>
<li>
<p><a href="https://owasp.org/www-project-top-ten/2017/A10_2017-Insufficient_Logging%2526Monitoring">OWASP Top 10 2017 Category A10</a> - Insufficient Logging &amp; Monitoring</p>
</li>
<li>
<p><a href="https://cwe.mitre.org/data/definitions/778.html">MITRE, CWE-778</a> - Insufficient Logging</p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Either handle this exception or propagate it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_parameters">Parameters</h3>
<div class="ulist">
<ul>
<li>
<p>key = exceptions
description = List of exceptions which should not be checked. Use a simple dash ('-') character to check all exceptions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>default = java.lang.InterruptedException, java.lang.NumberFormatException, java.text.ParseException, java.net.MalformedURLException,java.time.format.DateTimeParseException</p>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_related_to_s2486">is related to: S2486</h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s1148">relates to: S1148</h3>

</div>
<div class="sect2">
<h3 id="_on_30_jul_2013_165525_freddy_mallet_wrote">on 30 Jul 2013, 16:55:25 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Is implemented by http://jira.codehaus.org/browse/SONARJAVA-255</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_8_aug_2013_082726_dinesh_bolkensteyn_wrote">on 8 Aug 2013, 08:27:26 Dinesh Bolkensteyn wrote:</h3>
<div class="paragraph">
<p>We need to know:</p>
</div>
<div class="paragraph">
<p>1) All possible logger objects: LOGGER, Logger, logger</p>
</div>
<div class="paragraph">
<p>2) All possible logging methods: log(), warn(), warning(), error(), info(), debug()</p>
</div>
<div class="paragraph">
<p>There should be at least one logging method in the block having BOTH the exception as an argument + some other argument.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_8_aug_2013_135529_freddy_mallet_wrote">on 8 Aug 2013, 13:55:29 Freddy Mallet wrote:</h3>
<div class="paragraph">
<p>Conditions to log an issue :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Either : The original exception is not used inside the try-catch block as a method parameter</p>
</li>
<li>
<p>Or : When the original exception is used, the method call have only one parameter &#8594; this original exception</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_on_8_aug_2013_163500_dinesh_bolkensteyn_wrote">on 8 Aug 2013, 16:35:00 Dinesh Bolkensteyn wrote:</h3>
<div class="paragraph">
<p>I guess this will end up being too strong.</p>
</div>
<div class="paragraph">
<p>You can&#8217;t do stuff like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>catch (IOException e) {
  throw Throwables.propagate(e);
}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_on_26_aug_2013_080432_dinesh_bolkensteyn_wrote">on 26 Aug 2013, 08:04:32 Dinesh Bolkensteyn wrote:</h3>
<div class="paragraph">
<p>In fact we couldn&#8217;t even do stuff like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>catch (RuntimeException e) {
  throw e;
} catch (Exception e) {
  /* ... */
}</pre>
</div>
</div>
<div class="paragraph">
<p>This is now fixed.</p>
</div>
<div class="paragraph">
<p>Guava&#8217;s use case is still not allowed for the time being.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_11_mar_2014_065632_dinesh_bolkensteyn_wrote">on 11 Mar 2014, 06:56:32 Dinesh Bolkensteyn wrote:</h3>
<div class="paragraph">
<p>Update ticket: https://jira.codehaus.org/browse/SONARJAVA-446</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_jun_2015_082417_evgeny_mandrikov_wrote">on 23 Jun 2015, 08:24:17 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I&#8217;m wondering how and why this references Cppcheck "exceptRethrowCopy" ?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_jun_2015_115027_ann_campbell_wrote">on 23 Jun 2015, 11:50:27 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~evgeny.mandrikov] the message for exceptRethrowCopy is "Throwing a copy of the caught exception instead of rethrowing the original exception. (since Cppcheck 1.52)"</p>
</div>
<div class="paragraph">
<p>If you&#8217;re throwing a copy, you&#8217;re not preserving the original.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_23_jun_2015_134538_evgeny_mandrikov_wrote">on 23 Jun 2015, 13:45:38 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] To be precise - Cppcheck rule "exceptRethrowCopy" detects following case:</p>
</div>
<div class="paragraph">
<p>{noformat}</p>
</div>
<div class="paragraph">
<p>catch (Exception &amp;e) {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>throw e; // use of copy-constructor, use "throw;" to avoid call of copy-constructor</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>{noformat}</p>
</div>
<div class="paragraph">
<p>Looking on current examples, I&#8217;m wondering why you consider exact-copy as not preservation of original.</p>
</div>
<div class="paragraph">
<p>Also IMO motivation behind Cppcheck rule is different than description of this RSPEC. Note that C&#43;&#43; has no built-in notion of stack trace, compared to Java.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_25_jun_2015_122632_ann_campbell_wrote">on 25 Jun 2015, 12:26:32 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>CPPCheck mapping removed</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_28_sep_2015_054726_ramsatish_jagajyothi_wrote">on 28 Sep 2015, 05:47:26 Ramsatish Jagajyothi wrote:</h3>
<div class="paragraph">
<p>If java code is something like this, this violation is showing up which is false positive</p>
</div>
<div class="paragraph">
<p>throw (cause instanceof RuntimeException ?(RuntimeException)cause:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>new XXXSystemException( cause, cause.getMessage(), e.getErrorCode()) );</pre>
</div>
</div>
<div class="paragraph">
<p>I think this rule is not able to look into the throw params with ternary operator.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_13_oct_2015_115953_ann_campbell_wrote">on 13 Oct 2015, 11:59:53 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~ramsatish] please raise questions on the implementation of rules in individual languages on the <a href="https://groups.google.com/forum/#!forum/sonarqube">SonarQube Google group</a>.</p>
</div>
</div>
</div>
</div>