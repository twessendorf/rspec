<div class="paragraph">
<p>Making a comparison operator <code>virtual</code> implies that you want to compare objects of different types by overriding <code>operator==</code>, for instance, in a subclass to compare instances of the base class with instances of the subclass. But polymorphic comparison operators are very difficult to get right, and are actually questionable in concept. After all, can two objects with only a few common members really be equal?</p>
</div>
<div class="paragraph">
<p>This rule raises issues on <code>virtual</code> comparison operators.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>struct Foo {
  virtual bool operator==(const Foo &amp;other) const; // Noncompliant
  virtual bool operator!=(const Foo &amp;other) const; // Noncompliant
};</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>struct Foo {
  bool operator==(const Foo &amp;other) const;
  bool operator!=(const Foo &amp;other) const;
};</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/isocpp/CppCoreGuidelines/blob/036324/CppCoreGuidelines.md#c87-beware-of--on-base-classes">C&#43;&#43; Core Guidelines C.87</a> - Beware of == on base classes</p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Remove this "virtual" specifier and refactor the code to not require polymorphism for comparison operators.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>virtual keyword</p>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_5_aug_2016_144213_ann_campbell_wrote">on 5 Aug 2016, 14:42:13 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>See what you think [~alban.auzeill]</p>
</div>
</div>
</div>
</div>