<div class="paragraph">
<p>ECMAScript 2015 introduced the ability to extract and assign multiple data points from an object or array simultaneously. This is called "destructuring", and it allows you to condense boilerplate code so you can concentrate on logic.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when multiple pieces of data are extracted out of the same object or array and assigned to variables.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>function foo (obj1, obj2, array) {
  var a = obj1.a;  // Noncompliant
  var b = obj1.b;

  var name = obj2.name;  // ignored; there's only one extraction-and-assignment

  var zero = array[0];  // Noncompliant
  var one = array[1];
}</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>function foo (obj1, obj2, array) {
  var {a, b} = obj1;

  var {name} = obj2;  // this syntax works because var name and property name are the same

  var [zero, one] = array;
}</pre>
</div>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Use destructuring syntax for these assignments from "xxx".</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="ulist">
<ul>
<li>
<p>Primary: first assignment from object/array</p>
</li>
<li>
<p>Secondary: all subsequent assignments from same object/array</p>
<div class="ulist">
<ul>
<li>
<p>message: 'Replace this assignment.'</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_6_apr_2016_132040_christian_wrote">on 6 Apr 2016, 13:20:40 Christian wrote:</h3>
<div class="paragraph">
<p>Sorry for hijacking this Issue, but I found a small problem with ES2015 destructuring and am not able to create a new issue in this tracker&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>The parser currently dies when using destructuring with default values provided. The following sample throws an error in Version 2.11:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    let {
      headlines = [],
      breadCrumb = [],
      [this.myProp]: data=[],
      translations = {}
    } = response.data;</pre>
</div>
</div>
<div class="paragraph">
<p>Destructuring has the possibility to use default values, as well as custom property names (as in the this.myProp line).</p>
</div>
<div class="paragraph">
<p>The following error is encountered:</p>
</div>
<div class="paragraph">
<p>{noformat}</p>
</div>
<div class="paragraph">
<p>ERROR: Error during Sonar runner execution</p>
</div>
<div class="paragraph">
<p>org.sonar.runner.impl.RunnerException: Unable to execute Sonar</p>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.runner.impl.BatchLauncher$1.delegateExecution(BatchLauncher.java:91)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.runner.impl.BatchLauncher$1.run(BatchLauncher.java:75)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at java.security.AccessController.doPrivileged(Native Method)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.runner.impl.BatchLauncher.doExecute(BatchLauncher.java:69)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.runner.impl.BatchLauncher.execute(BatchLauncher.java:50)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.runner.api.EmbeddedRunner.doExecute(EmbeddedRunner.java:102)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.runner.api.Runner.execute(Runner.java:90)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.runner.Main.executeTask(Main.java:70)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.runner.Main.execute(Main.java:59)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.runner.Main.main(Main.java:41)</pre>
</div>
</div>
<div class="paragraph">
<p>Caused by: org.sonar.squidbridge.api.AnalysisException: Unable to analyse file: /var/lib/jenkins/jobs/xyz/workspace/src/Test.js</p>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.plugins.javascript.JavaScriptSquidSensor.analyse(JavaScriptSquidSensor.java:195)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.plugins.javascript.JavaScriptSquidSensor.analyseFiles(JavaScriptSquidSensor.java:161)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.plugins.javascript.JavaScriptSquidSensor.analyse(JavaScriptSquidSensor.java:152)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.batch.phases.SensorsExecutor.executeSensor(SensorsExecutor.java:79)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.batch.phases.SensorsExecutor.execute(SensorsExecutor.java:70)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.batch.phases.PhaseExecutor.execute(PhaseExecutor.java:119)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.batch.scan.ModuleScanContainer.doAfterStart(ModuleScanContainer.java:194)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:93)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.api.platform.ComponentContainer.execute(ComponentContainer.java:78)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.batch.scan.ProjectScanContainer.scan(ProjectScanContainer.java:233)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.batch.scan.ProjectScanContainer.scanRecursively(ProjectScanContainer.java:228)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.batch.scan.ProjectScanContainer.doAfterStart(ProjectScanContainer.java:221)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:93)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.api.platform.ComponentContainer.execute(ComponentContainer.java:78)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.batch.scan.ScanTask.scan(ScanTask.java:64)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.batch.scan.ScanTask.execute(ScanTask.java:51)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.batch.bootstrap.TaskContainer.doAfterStart(TaskContainer.java:125)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:93)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.api.platform.ComponentContainer.execute(ComponentContainer.java:78)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.batch.bootstrap.BootstrapContainer.executeTask(BootstrapContainer.java:173)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.batch.bootstrapper.Batch.executeTask(Batch.java:95)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.batch.bootstrapper.Batch.execute(Batch.java:67)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.runner.batch.IsolatedLauncher.execute(IsolatedLauncher.java:45)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at java.lang.reflect.Method.invoke(Method.java:606)</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>at org.sonar.runner.impl.BatchLauncher$1.delegateExecution(BatchLauncher.java:87)</pre>
</div>
</div>
<div class="paragraph">
<p>{noformat}</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_6_apr_2016_132334_ann_campbell_wrote">on 6 Apr 2016, 13:23:34 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~cs] the proper way to raise this is in the SonarQube Google group, not - as you said - to "hijack" an issue.</p>
</div>
</div>
</div>
</div>