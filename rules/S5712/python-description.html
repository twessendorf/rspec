<div class="paragraph">
<p>In Python, special methods corresponding to numeric operators, rich comparison operators and the <code>__length_hint__</code> method should return <code>NotImplemented</code> when the operation is not supported. These methods should not raise <code>NotImplementedError</code> as callers don&#8217;t expect it and won&#8217;t catch this exception.</p>
</div>
<div class="paragraph">
<p>For example <code>A + B</code> is equivalent to calling <code>A.__add__(B)</code>. If this binary operation is not supported by class A, <code>A.__add__(B)</code> should return <code>NotImplemented</code>. The interpreter will then try the reverse operation, i.e. <code>B.__radd__(A)</code>. This enables adding new operations by changing only one class instead of two.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when one of the following methods raises <code>NotImplementedError</code> instead of returning <code>NotImplemented</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>__lt__(self, other)</p>
</li>
<li>
<p>__le__(self, other)</p>
</li>
<li>
<p>__eq__(self, other)</p>
</li>
<li>
<p>__ne__(self, other)</p>
</li>
<li>
<p>__gt__(self, other)</p>
</li>
<li>
<p>__ge__(self, other)</p>
</li>
<li>
<p>__add__(self, other)</p>
</li>
<li>
<p>__sub__(self, other)</p>
</li>
<li>
<p>__mul__(self, other)</p>
</li>
<li>
<p>__matmul__(self, other)</p>
</li>
<li>
<p>__truediv__(self, other)</p>
</li>
<li>
<p>__floordiv__(self, other)</p>
</li>
<li>
<p>__mod__(self, other)</p>
</li>
<li>
<p>__divmod__(self, other)</p>
</li>
<li>
<p>__pow__(self, other[, modulo])</p>
</li>
<li>
<p>__lshift__(self, other)</p>
</li>
<li>
<p>__rshift__(self, other)</p>
</li>
<li>
<p>__and__(self, other)</p>
</li>
<li>
<p>__xor__(self, other)</p>
</li>
<li>
<p>__or__(self, other)</p>
</li>
<li>
<p>__radd__(self, other)</p>
</li>
<li>
<p>__rsub__(self, other)</p>
</li>
<li>
<p>__rmul__(self, other)</p>
</li>
<li>
<p>__rmatmul__(self, other)</p>
</li>
<li>
<p>__rtruediv__(self, other)</p>
</li>
<li>
<p>__rfloordiv__(self, other)</p>
</li>
<li>
<p>__rmod__(self, other)</p>
</li>
<li>
<p>__rdivmod__(self, other)</p>
</li>
<li>
<p>__rpow__(self, other[, modulo])</p>
</li>
<li>
<p>__rlshift__(self, other)</p>
</li>
<li>
<p>__rrshift__(self, other)</p>
</li>
<li>
<p>__rand__(self, other)</p>
</li>
<li>
<p>__rxor__(self, other)</p>
</li>
<li>
<p>__ror__(self, other)</p>
</li>
<li>
<p>__iadd__(self, other)</p>
</li>
<li>
<p>__isub__(self, other)</p>
</li>
<li>
<p>__imul__(self, other)</p>
</li>
<li>
<p>__imatmul__(self, other)</p>
</li>
<li>
<p>__itruediv__(self, other)</p>
</li>
<li>
<p>__ifloordiv__(self, other)</p>
</li>
<li>
<p>__imod__(self, other)</p>
</li>
<li>
<p>__ipow__(self, other[, modulo])</p>
</li>
<li>
<p>__ilshift__(self, other)</p>
</li>
<li>
<p>__irshift__(self, other)</p>
</li>
<li>
<p>__iand__(self, other)</p>
</li>
<li>
<p>__ixor__(self, other)</p>
</li>
<li>
<p>__ior__(self, other)</p>
</li>
<li>
<p>__length_hint__(self)</p>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>class MyClass:
    def __add__(self, other):
        raise NotImplementedError()  # Noncompliant
    def __radd__(self, other):
        raise NotImplementedError()  # Noncompliant

class MyOtherClass:
    def __add__(self, other):
        return 42
    def __radd__(self, other):
        return 42

MyClass() + MyOtherClass()  # This will raise NotImplementedError</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>class MyClass:
    def __add__(self, other):
        return NotImplemented
    def __radd__(self, other):
        return NotImplemented

class MyOtherClass:
    def __add__(self, other):
        return 42
    def __radd__(self, other):
        return 42

MyClass() + MyOtherClass()  # This returns 42</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Python documentation - <a href="https://docs.python.org/3/library/constants.html#NotImplemented">Built-in Constants - NotImplemented</a></p>
</li>
<li>
<p>Python documentation - <a href="https://docs.python.org/3/library/numbers.html#implementing-the-arithmetic-operations">Implementing the arithmetic operations</a></p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Return "NotImplemented" instead of raising "NotImplementedError"</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>The raise statement.</p>
</div>
</div>
</div>
</div>