<div class="paragraph">
<p>The comma between two expressions that are not different function arguments is called "the comma operator" and has special evaluation semantics. The expression composed of the three expressions separated by a comma are evaluated sequentially and the results of all but the last subexpression are discarded. For example in the expression <code>foo(), a = 1, i - 1</code>: first <code>foo</code> is invoked, then <code>a</code> is assigned 1, and finally <code>i - 1</code> is computed and becomes the result of the whole expression, ignoring the result of the previous two subexpressions.</p>
</div>
<div class="paragraph">
<p>The use of a comma operator is rarely justified, see S878. Moreover, C&#43;&#43;20 deprecates the use of a comma operator inside "the subscript operator" argument (the square brackets []) because it might be repurposed in the later editions of the standard for multidimensional arrays. In case you still want to call the comma operator inside a subscript operator, you will have to enclose it in parentheses.</p>
</div>
<div class="paragraph">
<p>This rule reports the use of a comma operator in the argument of a subscript operator.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>a[1, 2] = 3; // Noncompliant

x = a[i++, j = i + 1, j*2]; // Noncompliant</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>a[(1, 2)] = 3; // Compliant: explicit use of the operator ","
j = i + 1;
x = a[j*2];
++i;</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>S878</p>
</li>
<li>
<p><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1161r3">Deprecate uses of the comma operator in subscripting expressions</a></p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s878">relates to: S878</h3>

</div>
</div>
</div>