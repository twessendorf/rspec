<div class="paragraph">
<p>JavaScript variable scope can be particularly difficult to understand and get right. The situation gets even worse when you consider the <em>accidental</em> creation of global variables, which is what happens when you declare a variable inside a function or the <code>for</code> clause of a for-loop without using the <code>let</code>, <code>const</code> or <code>var</code> keywords.</p>
</div>
<div class="paragraph">
<p><code>let</code> and <code>const</code> were introduced in ECMAScript 2015, and are now the preferred keywords for variable declaration.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>function f(){
  i = 1;         // Noncompliant; i is global

  for (j = 0; j &lt; array.length; j++) {  // Noncompliant; j is global now too
    // ...
  }
}</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>function f(){
  var i = 1;

  for (let j = 0; j &lt; array.length; j++) {
    // ...
  }
}</pre>
</div>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Add the "let", "const" or "var" keyword to this declaration of "{0}" to make it explicit.</p>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_is_related_to_s3798">is related to: S3798</h3>

</div>
<div class="sect2">
<h3 id="_on_13_mar_2015_134955_ann_campbell_wrote">on 13 Mar 2015, 13:49:55 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>I modified the code sample you provided, [~linda.martin]. Feel free to change it back.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_13_mar_2015_140249_linda_martin_wrote">on 13 Mar 2015, 14:02:49 Linda Martin wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] From the description it seems that each type you declare a variable without the keyword "var" it creates a global variable. Whereas it is only within for-loops and functions that that it creates a global variable.</p>
</div>
<div class="paragraph">
<p>Maybe it&#8217;s my understanding of english that it&#8217;s questionable or I wrongly expressed myself when I first described the rule ?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_19_may_2015_140917_linda_martin_wrote">on 19 May 2015, 14:09:17 Linda Martin wrote:</h3>
<div class="paragraph">
<p>Reviewed.</p>
</div>
</div>
</div>
</div>