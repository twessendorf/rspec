<div class="paragraph">
<p>Including any logic other than a simple return of the field in a persistence-annotated method can result in odd behavior, including for example, the default construction of empty members which are annotated to be <code>lazy</code>.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>private Double price;

@Columm(name="price")
public Double getPrice() {
  if(buyer.isLoaltyMember()) {  // Noncompliant
    return price - getLoyaltyDiscount();
  } else {
    return price;
  }
}</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>@Columm(name="price")
private Double price;

public Double getPrice() {
  if(buyer.isLoaltyMember()) {
    return price - getLoyaltyDiscount();
  } else {
    return price;
  }
}</pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>private Double price;

@Columm(name="price")
public Double getPrice() {
  return price;
}

public Double calculatePrice() {
  if(buyer.isLoaltyMember()) {  // Noncompliant
    return getPrice() - getLoyaltyDiscount();
  } else {
    return getPrice();
  }
}</pre>
</div>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>Remove the additional logic from this method or switch all annotations to this class' fields.</p>
</div>
</div>
</div>
</div>