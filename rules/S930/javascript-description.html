<div class="paragraph">
<p>You can easily call a JavaScript function with more arguments than the function needs, but the extra arguments will be just ignored by function execution.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>function say(a, b) {
  print(a + " " + b);
}

say("hello", "world", "!"); // Noncompliant; last argument is not used</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exceptions">Exceptions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>No issue is reported when <code>arguments</code> is used in the body of the function being called.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>function doSomething(a, b) {
  compute(arguments);
}

doSomething(1, 2, 3) // Compliant</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://cwe.mitre.org/data/definitions/628.html">MITRE, CWE-628</a> - Function Call with Incorrectly Specified Arguments</p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="paragraph">
<p>"xxx" expects YYY argument(s), but ZZZ was/were provided.</p>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="ulist">
<ul>
<li>
<p>Primary: list of arguments</p>
</li>
<li>
<p>Additional: list of parameters (in function declaration)</p>
<div class="ulist">
<ul>
<li>
<p>message: Formal parameters</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_on_29_apr_2015_080251_ann_campbell_wrote">on 29 Apr 2015, 08:02:51 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>See JSC_WRONG_ARGUMENT_COUNT at https://developers.google.com/closure/compiler/docs/error-ref</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_29_apr_2015_085410_linda_martin_wrote">on 29 Apr 2015, 08:54:10 Linda Martin wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I would say "[&#8230;&#8203;] doing so <strong>could</strong> lead to unexpected results.", because it could be expected that not all arguments will be given because some are optionals and the body function will check it.</p>
</div>
<div class="paragraph">
<p>Also what do you think about adding an exception when <code>arguments</code> is used in the body of the function ?</p>
</div>
<div class="paragraph">
<p>E.g</p>
</div>
<div class="listingblock">
<div class="content">
<pre>function f(a, b, c, d) {
 for (var i = 0; i &lt; arguments.length; i++) {
    doSomethingWith(arguments[i]);
  }
}</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_on_29_apr_2015_124303_ann_campbell_wrote">on 29 Apr 2015, 12:43:03 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>I&#8217;ve changed the wording from 'will' to 'could', but I&#8217;m against your proposed exception: it requires the author of the call to examine the code of the method being called, which is just not something you should have to do.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_20_may_2015_070936_linda_martin_wrote">on 20 May 2015, 07:09:36 Linda Martin wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] not necessarily, documentation exists exactly for this kind of cases.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_20_may_2015_174029_ann_campbell_wrote">on 20 May 2015, 17:40:29 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>So can we narrow the exception, [~linda.martin] to: function is documented (there&#8217;s a comment immediately before it) AND arguments is used in the body?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_2_jun_2015_142900_stas_vilchik_wrote">on 2 Jun 2015, 14:29:00 Stas Vilchik wrote:</h3>
<div class="paragraph">
<p>What to do with optional parameters? Just check the several first functions from <a href="http://underscorejs.org/">underscore.js</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_2_jun_2015_152709_ann_campbell_wrote">on 2 Jun 2015, 15:27:09 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>Per discussion with [~elena.vilchik], the too few args case is ignored by this rule.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_2_jun_2015_155804_linda_martin_wrote">on 2 Jun 2015, 15:58:04 Linda Martin wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] So no explicit mention of the "exception" in the rule description ?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_2_jun_2015_163247_elena_vilchik_wrote">on 2 Jun 2015, 16:32:47 Elena Vilchik wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] I&#8217;ve updated description. Assigned to you for validation. CC [~linda.martin]</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_3_jun_2015_143911_ann_campbell_wrote">on 3 Jun 2015, 14:39:11 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>IMO [~linda.martin] no explicit mention needed of ignoring too few args since specialized title narrows the scope.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_4_jun_2015_074709_linda_martin_wrote">on 4 Jun 2015, 07:47:09 Linda Martin wrote:</h3>
<div class="paragraph">
<p>OK!</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_8_jun_2015_111827_elena_vilchik_wrote">on 8 Jun 2015, 11:18:27 Elena Vilchik wrote:</h3>
<div class="paragraph">
<p>We need to activate this subtask by default (http://jira.sonarsource.com/browse/RULEAPI-243). Implementation already updated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_21_oct_2014_184410_ann_campbell_wrote">on 21 Oct 2014, 18:44:10 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~samuel.mercier]</p>
</div>
<div class="ulist">
<ul>
<li>
<p>nice use of See Also</p>
</li>
<li>
<p>please cite extra references in text or references section, but not both</p>
</li>
<li>
<p>this rule is targeted to C&#43;&#43;, but I&#8217;m not sure it&#8217;s appropriate - you can have default parameter values in C&#43;&#43; but not in C. Unless at implementation time there&#8217;s an intent to ignore the mismatch when covered by default values?</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_on_24_oct_2014_081643_samuel_mercier_wrote">on 24 Oct 2014, 08:16:43 Samuel Mercier wrote:</h3>
<div class="paragraph">
<p>\[~ann.campbell.2] [~evgeny.mandrikov] [~freddy.mallet]</p>
</div>
<div class="paragraph">
<p>In c you can call a function without declaring it, so f(12, 34) is valid if f is not declared.</p>
</div>
<div class="paragraph">
<p>In C&#43;&#43; I think you need a definition or at least a prototype, so I removed it from the list of targeted languages.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_16_nov_2014_015326_evgeny_mandrikov_wrote">on 16 Nov 2014, 01:53:26 Evgeny Mandrikov wrote:</h3>
<div class="paragraph">
<p>\[~samuel.mercier], [~ann.campbell.2], [~freddy.mallet], guys, I&#8217;m a little bit puzzled about what we want to achieve here and thus about how this rule should be implemented.</p>
</div>
<div class="paragraph">
<p>According to C99 6.5.2.2p2:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>If the expression that denotes the called function has a type that includes a prototype, the number of arguments shall agree with the number of parameters.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>So one option to violate this - compiler should not conform with C99, which sounds unbelievable in 2014. But let&#8217;s try:</p>
</div>
<div class="paragraph">
<p>{noformat:title=1.c}</p>
</div>
<div class="paragraph">
<p>void fun(int p) {</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>void test() {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>fun();</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>{noformat}</p>
</div>
<div class="paragraph">
<p>This is not accepted by GCC 4.7.3, Clang 3.5.0, ICC 14.0.3 20140422 (invoked with "-fsyntax-only --std c89") with error message "too few arguments to function call". Should we try with older compilers? How old? 1, 2, 5 years old?</p>
</div>
<div class="paragraph">
<p>Another option to violate this - do not use prototype:</p>
</div>
<div class="paragraph">
<p>{noformat:title=2.c}</p>
</div>
<div class="paragraph">
<p>void fun() {</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>void test() {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>fun(42);</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>{noformat}</p>
</div>
<div class="paragraph">
<p>And indeed in this case no messages with GCC, but warning with Clang and ICC - "too many arguments in call to 'fun'". But then IMO this is covered by MISRA C:2004, 16.5 (RSPEC-929), which clearly requires to specify "void" and so implies prototype, or MISRA C:2004, 8.1 (RSPEC-819), which I assume implies requirement of prototype.</p>
</div>
<div class="paragraph">
<p>Third option to violate this - use implicit function declaration, which also means no prototype:</p>
</div>
<div class="paragraph">
<p>{noformat:title=3.c}</p>
</div>
<div class="paragraph">
<p>void test() {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>fun(42);</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>{noformat}</p>
</div>
<div class="paragraph">
<p>Same result as in second case. But then IMO this is covered by MISRA C:2004, 8.1 (RSPEC-819) as before, or by MISRA C:2012 17.3, which clearly forbids implicit function declaration and I suppose also should be part of RSPEC-819.</p>
</div>
<div class="paragraph">
<p>Fourth option to violate this - use K&amp;R style of function definition, which also means no prototype:</p>
</div>
<div class="paragraph">
<p>{noformat:title=4.c}</p>
</div>
<div class="paragraph">
<p>void fun(p)</p>
</div>
<div class="literalblock">
<div class="content">
<pre>int p;</pre>
</div>
</div>
<div class="paragraph">
<p>{</p>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>void test() {</p>
</div>
<div class="literalblock">
<div class="content">
<pre>fun(42);</pre>
</div>
</div>
<div class="paragraph">
<p>}</p>
</div>
<div class="paragraph">
<p>{noformat}</p>
</div>
<div class="paragraph">
<p>Same result. But then IMO this is covered by RSPEC-1198, which clearly forbids K&amp;R style.</p>
</div>
<div class="paragraph">
<p>The difference between mentioned rules and this one - others are about declarations, whereas this about call-sites. So that if all enabled, then we&#8217;ll simply get more violations. And thus the only valid use-case for this one - when others are disabled, or when there is no way to fix declaration, i.e. when it comes from third-party header file.</p>
</div>
<div class="paragraph">
<p>Is it?</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_17_nov_2014_153751_ann_campbell_wrote">on 17 Nov 2014, 15:37:51 Ann Campbell wrote:</h3>
<div class="paragraph">
<p>\[~evgeny.mandrikov],</p>
</div>
<div class="paragraph">
<p>I have a few responses to your comment. Rather than choosing, I&#8217;ll list them all:</p>
</div>
<div class="paragraph">
<p>1) The varargs argument is one of the things that came to mind when I read this rule, but as you&#8217;re about to point out, there&#8217;s another rule for that.</p>
</div>
<div class="paragraph">
<p>2) We can&#8217;t make assumptions about the compilers in use. Probably a frightening number of places are supporting ancient infrastructure (incl. compilers) because "it works; don&#8217;t mess with it!". (I&#8217;ve seen this in action.)</p>
</div>
<div class="paragraph">
<p>3) We have another rule already implemented that&#8217;s about code that won&#8217;t easily compile with modern compilers. If we&#8217;re going for full MISRA coverage (as full as possible, that is) adding this perhaps-nonsensical rule doesn&#8217;t seem like a big deal to me.</p>
</div>
<div class="paragraph">
<p>4) IMO, this rule is a good argument for not trying to adhere strictly to MISRA as written.</p>
</div>
<div class="paragraph">
<p>cc [~samuel.mercier], [~freddy.mallet]</p>
</div>
</div>
</div>
</div>