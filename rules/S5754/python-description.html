<div class="paragraph">
<p><a href="https://docs.python.org/3/library/exceptions.html#SystemExit"><code>SystemExit</code></a>Â is raised when <a href="https://docs.python.org/3/library/sys.html#sys.exit"><code>sys.exit()</code></a> is called. This exception is expected to propagate up until the application stops. It is ok to catch it when a clean-up is necessary but it should be raised again immediately.</p>
</div>
<div class="paragraph">
<p>A <a href="https://docs.python.org/3/reference/compound_stmts.html#the-try-statement">bare <code>except:</code> statement</a>, i.e. an <code>except</code> without any exception class, is equivalent to <a href="https://docs.python.org/3/library/exceptions.html#BaseException"><code>except BaseException</code></a>. Both statements will catch every exception, including <code>SystemExit</code>. It is recommended to catch instead a specific exception. If it is not possible, the exception should be raised again.</p>
</div>
<div class="paragraph">
<p>Note that it is also a good idea to reraise the <a href="https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt"><code>KeyboardInterrupt</code></a> exception.</p>
</div>
<div class="paragraph">
<p>This rule raises an issue when a bare <code>except:</code>, an <code>except BaseException</code> or an <code>except SystemExit</code> don&#8217;t reraise the exception caught.</p>
</div>
<div class="sect1">
<h2 id="_noncompliant_code_example">Noncompliant Code Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>try:
    open("foo.txt", "r")
except SystemExit:  # Noncompliant
    pass
except KeyboardInterrupt:  # No issue raised but be careful when you do this
    pass

try:
    open("bar.txt", "r")
except BaseException:  # Noncompliant
    pass
except:  # Noncompliant
    pass</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compliant_solution">Compliant Solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>try:
    open("foo.txt", "r")
except SystemExit:
    # clean-up
    raise
except KeyboardInterrupt:
    # clean-up
    raise

try:
    open("bar.txt", "r")
except BaseException as e:
    # clean-up
    raise e
except: # Noncompliant
    # clean-up
    raise

# or use a more specific exception

try:
    open("bar.txt", "r")
except FileNotFoundError:
    # process the exception</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see">See</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>PEP 352 - <a href="https://www.python.org/dev/peps/pep-0352/#id5">Required Superclass for Exceptions</a></p>
</li>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/library/exceptions.html">Built-in exceptions</a></p>
</li>
<li>
<p>Python Documentation - <a href="https://docs.python.org/3/reference/compound_stmts.html#the-try-statement">The <code>try</code> statement</a></p>
</li>
<li>
<p><a href="https://cwe.mitre.org/data/definitions/391.html">MITRE, CWE-391</a> - Unchecked Error Condition</p>
</li>
</ul>
</div>
<hr/>
</div>
</div>
<div class="sect1">
<h2 id="_implementation_specification">Implementation Specification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_message">Message</h3>
<div class="ulist">
<ul>
<li>
<p>if it is a bare "except:":</p>
</li>
<li>
<p>specify an exception class to catch or reraise the exception.</p>
</li>
<li>
<p>if it catches a BaseException:</p>
</li>
<li>
<p>catch a more specific exception or reraise the exception.</p>
</li>
<li>
<p>if SystemExit is caught:the application as the user expects.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_highlighting">Highlighting</h3>
<div class="paragraph">
<p>the "except" statement</p>
</div>
<hr/>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comments_and_links">Comments And Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(visible only on this page)</p>
</div>
<div class="sect2">
<h3 id="_relates_to_s1181">relates to: S1181</h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s2142">relates to: S2142</h3>

</div>
<div class="sect2">
<h3 id="_relates_to_s2738">relates to: S2738</h3>

</div>
<div class="sect2">
<h3 id="_on_6_mar_2020_150541_nicolas_harraudeau_wrote">on 6 Mar 2020, 15:05:41 Nicolas Harraudeau wrote:</h3>
<div class="paragraph">
<p>This rule is similar to RSPEC-2142 but this one is a code smell because python 2 forced developers to use a bare <code>except:</code> for a long time. Thus old projects will have many issues. Yet even in python 2 it is possible to handle properly the exception. Thus we raise a code smell issue for both python 2 and python 3.</p>
</div>
</div>
</div>
</div>